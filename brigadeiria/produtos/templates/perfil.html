{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PERFIL | Sayuri's Brigaderia</title>

  <link href="https://fonts.googleapis.com/css2?family=Voces&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="{% static 'CSS/perfil.css' %}">
  <link rel="stylesheet" href="{% static 'CSS/base.css' %}">

</head>
<body>

  <main class="container">

    {% if messages %}
      <div class="msg-container">
        {% for message in messages %}
          <div class="msg {{ message.tags }}">{{ message }}</div>
        {% endfor %}
      </div>
    {% endif %}

    {% if user.is_authenticated %}
      <!-- ğŸ”¹ Se o usuÃ¡rio estiver logado -->
      <section class="box-logged">
  <h3 class="titulo">OlÃ¡, {{ user.first_name|default:user.username }} ğŸ‘‹</h3>
  <form class="edit-form" action="{% url 'atualizar_perfil' %}" method="POST">
    {% csrf_token %}
    <input type="text" name="nome" value="{{ user.first_name }}" placeholder="Nome completo" required>
    <input type="email" name="email" value="{{ user.email }}" placeholder="E-mail" required>
    <input type="tel" name="telefone" value="{{ user.perfil.telefone }}" placeholder="Telefone">
    <p class="end">EndereÃ§o</p>
    <input type="text" name="cep" value="{{ user.perfil.cep }}" placeholder="CEP">
    <input type="text" name="endereco" value="{{ user.perfil.endereco }}" placeholder="EndereÃ§o">
    <input type="text" name="complemento" value="{{ user.perfil.complemento }}" placeholder="Complemento">
    <button type="submit">Salvar alteraÃ§Ãµes</button>
  </form>
    <button id="logoutBtn" class="logout-btn">Sair</button>
      </section>

      <!-- Modal de confirmaÃ§Ã£o -->
      <div id="logoutModal" class="logout-modal">
        <div class="logout-modal-content">
          <h3>Deseja realmente sair?</h3>
          <div class="logout-buttons">
            <a href="{% url 'sair' %}" id="confirmLogout" class="btn-confirm">Sim, sair</a>
            <button id="cancelLogout" class="btn-cancel">Cancelar</button>
          </div>
        </div>
      </div>

    {% else %}
      <!-- LOGIN -->
      <section class="box-login ativo" id="loginSection">
        <div class="form-content">
          <h3 class="titulo-login">Login</h3>
          <img src="{% static 'src/perfilicon.png' %}" alt="Perfil" class="icon-profile-login">

          <form action="{% url 'logar' %}" method="POST">
            {% csrf_token %}
            <input type="email" name="email" placeholder="E-mail" required>
            <input type="password" name="senha" placeholder="Senha" required>
            <button type="submit"> Entrar </button>

            <p class="texto-mudar"> NÃ£o tem conta? <a href="#" id="btnToRegister"> Cadastre-se </a></p>
          </form>
        </div>
      </section>

      <!-- CADASTRO -->
      <section class="box-register" id="registerSection">
        <div class="form-content">
          <h3 class="titulo-register">Cadastre-se</h3>
          <img src="{% static 'src/perfilicon.png' %}" alt="Perfil" class="icon-profile-register">

          <form action="{% url 'registrar' %}" method="POST">
            {% csrf_token %}
            <input type="text" name="nome" placeholder="Nome completo" required>
            <input type="email" name="email" placeholder="E-mail" required>
            <input type="tel" name="telefone" placeholder="Telefone" required>
            <input type="password" name="senha" placeholder="Senha" required>
            <input type="password" name="confirmarSenha" placeholder="Confirmar senha" required>
            <p class="end"> EndereÃ§o </p>
            <input type="text" name="cep" placeholder="CEP">
            <input type="text" name="endereco" placeholder="EndereÃ§o">
            <input type="text" name="complemento" placeholder="Complemento">
            <button type="submit"> Cadastrar-se </button>

            <p class="texto-mudar"> JÃ¡ tem conta? <a href="#" id="btnToLogin"> Login </a></p>
          </form>
        </div>
      </section>
    {% endif %}
  </main>

  <script src="{% static 'JS/perfil.js' %}"></script>
</body>
</html>