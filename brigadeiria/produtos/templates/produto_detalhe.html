{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>{{ produto.nome }} | Sayuri's Brigadeiros</title>
  <link rel="stylesheet" href="{% static 'CSS/base.css' %}">
  <link rel="stylesheet" href="{% static 'CSS/produto_detalhe.css' %}">
  <link href="https://fonts.googleapis.com/css2?family=Voces&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Cabe√ßalho simples -->
  <header class="produto-header">
    <a href="{% url 'cardapio' %}" class="voltar">‚Üê Voltar ao card√°pio</a>
    <img src="{% static 'src/TCC.png' %}" alt="Logo Sayuri's Brigadeiros" class="logo-header">
  </header>

  <!-- Conte√∫do principal -->
  <main class="produto-container">
  <div class="produto-card">
    {% if produto.imagem %}
      <img src="{{ produto.imagem.url }}" alt="{{ produto.nome }}" class="produto-imagem">
    {% endif %}

    <div class="produto-info">
      <h1 class="produto-nome">{{ produto.nome }}</h1>
      <p class="produto-descricao">{{ produto.descricao }}</p>
      <p class="produto-preco">R$ 6,00 / unidade</p>

      <div class="quantidade-wrapper">
        <button class="btn-quantidade menos">‚àí</button>
        <span class="quantidade" id="quantidade">25</span>
        <button class="btn-quantidade mais">+</button>
      </div>

      <div class="add-wrapper">
        <button class="btn-add" id="btnAdicionar">Adicionar</button>
        <span class="total" id="total">R$ 150,00</span>
      </div>
    </div>
  </div>
</main>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const precoUnitario = 6.0;
  const minimo = 25;
  let quantidade = minimo;

  const spanQtd = document.getElementById("quantidade");
  const spanTotal = document.getElementById("total");
  const btnMais = document.querySelector(".mais");
  const btnMenos = document.querySelector(".menos");
  const btnAdd = document.getElementById("btnAdicionar");

  function atualizarTotal() {
    const total = quantidade * precoUnitario;
    spanQtd.textContent = quantidade;
    spanTotal.textContent = `R$ ${total.toFixed(2).replace('.', ',')}`;
  }

  btnMais.addEventListener("click", () => {
    quantidade += 5; // incrementa de 5 em 5
    atualizarTotal();
  });

  btnMenos.addEventListener("click", () => {
    if (quantidade > minimo) {
      quantidade -= 5;
      atualizarTotal();
    }
  });

  btnAdd.addEventListener("click", () => {
    const produto = {
      name: "{{ produto.nome }}",
      price: precoUnitario,
      quantidade: quantidade,
      subtotal: quantidade * precoUnitario
    };

    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    cart.push(produto);
    localStorage.setItem("cart", JSON.stringify(cart));

    alert(`${quantidade} unidades de "${produto.name}" foram adicionadas ao carrinho!`);
  });

  atualizarTotal();
});
</script>


  <!-- Rodap√© -->
  <footer class="produto-footer">
    <p>¬© 2025 Sayuri‚Äôs Brigadeiros ‚Äî Feito com üíï e muito chocolate.</p>
  </footer>

  <script>
    window.BUSCAR_URL = "{% url 'buscar' %}";
  </script>

  <script src="{% static 'JS/search.js' %}" defer></script>

</body>
</html>
